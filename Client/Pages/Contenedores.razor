@page "/Contenedores"


@using System.Drawing
@using BlazorLeaflet
@using BlazorLeaflet.Models
@using BlazorLeaflet.Models.Events
@inject IJSRuntime jsRuntime

<MudText Typo="Typo.h6" GutterBottom="true">Puntos Limpios de Proximidad y Móviles</MudText>

@*<div id="map" class="vw-100  vh-100"></div>*@
<div id="mapContainer"style="width:100%;height:500px">
	<LeafletMap Map="_map" />
</div>

@code {

	private Map? _map;

	private LatLng _markerLatLng = new LatLng { Lat = 40.470491685969996F, Lng = -3.5898632639571653F};

	protected override void OnInitialized()
	{

		var marker = new Marker(_markerLatLng)
        {
            Draggable = false,
            Title = "Marker 1",
            Popup = new Popup { Content = string.Format("I am at {0:0.00}° lat, {1:0.00}° lng", _markerLatLng.Lat, _markerLatLng.Lng) },
            Tooltip = new Tooltip { Content = "Click and drag to move me" }
        };
		_map = new Map(jsRuntime)
			{
				Center = _startAt,
				Zoom = 4.8f
			};

		_map.OnInitialized += () =>
		{
			_map.AddLayer(new TileLayer
				{
					UrlTemplate = "https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",
					Attribution = "&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors",
				});
			_map.AddLayer(marker);
			//_map.AddLayer(new Polygon
			//	{
			//		Shape = new[]
			//		{ new[] { new PointF(37f, -109.05f), new PointF(41f, -109.03f), new PointF(41f, -102.05f), new PointF(37f, -102.04f) } },
			//		Fill = true,
			//		FillColor = System.Drawing.Color.Blue,
			//		Popup = new Popup
			//		{
			//			Content = "How are you doing,"
			//		}
			//	});

			//_map.AddLayer(new System.Drawing.Rectangle
			//	{
			//		Shape = new RectangleF(10f, 0f, 5f, 1f)
			//	});

			var _circle = new Circle
				{
					Position = new LatLng(10f, 5f),
					Radius = 10f
				};
			_map.AddLayer(_circle);
		};
	}

	private LatLng _startAt = new LatLng(47.5574007f, 16.3918687f);


}





